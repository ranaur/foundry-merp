<div>
    <div class="health-statuses">
       <div class="flexrow">
            <h2 class="flex3">{{localize 'MERP1E.Health.HitPointsAndStatuses'}}</h2>

            <div style="display: flex; justify-content: center; align-items: center; text-align: center;" class="flexrow">
                <span class="health-control" data-action="next-round">
                    <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-hourglass-half"></i>
                </span>
                <span class="health-control" data-action="erase-status">
                    <i title="{{localize 'MERP1E.Damage.EraseStatus'}}" class="fas fa-eraser"></i>
                </span>
            </div>
        </div>
        <div class="resources grid grid-4col">
            <div>
                <label class="resource-label"><i class="fas fa-skull"></i> {{localize 'MERP1E.Health.MaximumHPDie'}}</label>
                <input id="maximumHPDie" value="{{actor.health.maximumHPDie}}" data-dtype="Number" type="number" readonly tabindex=-1/>
            </div>
            <div>
                <label class="resource-label"><i class="fas fa-heart"></i> {{localize 'MERP1E.Health.MaximumHPOut'}}</label>
                <input id="maximumHPOut" value="{{actor.health.maximumHPOut}}" data-dtype="Number" type="number" readonly tabindex=-1/>
            </div>
            <div>
                <label class="resource-label"><i class="fas fa-heart-broken"></i> {{localize 'MERP1E.Health.HitsTaken'}}</label>
                <input name="data.healthStatus.hitsTaken" value="{{actor.health.hitsTaken}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
            </div>
            <div>
                <label class="resource-label"><i class="far fa-heart"></i> {{localize 'MERP1E.Health.HitsLeft'}}</label>
                <input id="hitsLeft" value="{{actor.health.hitsLeft}}" data-dtype="Number" type="number" readonly tabindex=-1/>
            </div>
        </div>
        <div class="grid grid-4col">
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-tint"></i> {{localize "MERP1E.Damage.HitsPerRound"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.hitsPerRound" value="{{actor.health.status.hitsPerRound}}" data-dtype="Number" type="number"  {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-minus"></i> {{localize "MERP1E.Damage.ActivityPenalty"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.activityPenalty" value="{{actor.health.status.activityPenalty}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-step="-5" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-ban"></i> {{localize "MERP1E.Damage.RoundsStunned"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.roundsStunned" value="{{actor.health.status.roundsStunned}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="far fa-meh"></i> {{localize "MERP1E.Damage.RoundsDown"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.roundsDown" value="{{actor.health.status.roundsDown}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="far fa-dizzy"></i> {{localize "MERP1E.Damage.RoundsOut"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.roundsOut" value="{{actor.health.status.roundsOut}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-skull-crossbones"></i> {{localize "MERP1E.Damage.RoundsUntilDeath"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.roundsUntilDeath" value="{{actor.health.status.roundsUntilDeath}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-eye-slash"></i> {{localize "MERP1E.Damage.RoundsBlinded"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.roundsBlinded" value="{{actor.health.status.roundsBlinded}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-gavel"></i> {{localize "MERP1E.Damage.RoundsWeaponStuck"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.roundsWeaponStuck" value="{{actor.health.status.roundsWeaponStuck}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-dizzy"></i> {{localize "MERP1E.Damage.UnconsciousComa"}}</label>
                <div class="flexrow">
                    <input class="flex3" type="number" name="data.healthStatus.unconsciousComa" value="{{actor.health.status.unconsciousComa}}" data-dtype="Number" type="number" {{roif rules.settings.damageControlAutomatic}}/>
                    {{#if damageControlManual}}
                    <div style="display: flex; justify-content: center; align-items: center;" class="health-control" data-action="damage-add">
                        <i title="{{localize 'MERP1E.Damage.Add'}}" class="fas fa-plus"></i>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-wheelchair"></i> {{localize "MERP1E.Damage.Paralyzed"}}</label>
                <select name="data.healthStatus.paralyzed" {{roif rules.settings.damageControlAutomatic}}>
                    {{selectOptions rules.health.paralyzedStatus selected=actor.health.status.paralyzed localize=true nameAttr="value" labelAttr="labelI18"}}
                </select>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-deaf"></i> {{localize "MERP1E.Damage.HearingLoss"}}</label>
                <select name="data.healthStatus.hearingLoss" {{roif rules.settings.damageControlAutomatic}}>
                    {{selectOptions rules.health.sideStatus selected=actor.health.status.hearingLoss localize=true nameAttr="value" labelAttr="labelI18"}}
                </select>
            </div>
            <div class="flexcol">
                <label class="resource-label"><i class="fas fa-eye-slash"></i> {{localize "MERP1E.Damage.EyeLoss"}}</label>
                <select name="data.healthStatus.eyeLoss" {{roif rules.settings.damageControlAutomatic}}>
                    {{selectOptions rules.health.sideStatus selected=actor.health.status.eyeLoss localize=true nameAttr="value" labelAttr="labelI18"}}
                </select>
            </div>
        </div>
        <div class="grid grid-2col">
            <div class="flexrow">
                <label class="resource-label"><i class="far fa-hand-paper"></i> {{localize "MERP1E.Damage.Arm"}}</label>
                <div class="flexrow">
                    <select name="data.healthStatus.leftArm" {{roif rules.settings.damageControlAutomatic}}>
                        {{selectOptions rules.health.apendageStatus selected=actor.health.status.leftArm localize=true nameAttr="value" labelAttr="labelI18"}}
                    </select>
                    <div>/</div>
                    <select name="data.healthStatus.rightArm" {{roif rules.settings.damageControlAutomatic}}>
                        {{selectOptions rules.health.apendageStatus selected=actor.health.status.rightArm localize=true nameAttr="value" labelAttr="labelI18"}}
                    </select>
                </div>
            </div>
            <div class="flexrow">
                <label class="resource-label"><i class="fas fa-shoe-prints"></i> {{localize "MERP1E.Damage.Leg"}}</label>
                <div class="flexrow">
                    <select name="data.healthStatus.leftLeg" {{roif rules.settings.damageControlAutomatic}}>
                        {{selectOptions rules.health.apendageStatus selected=actor.health.status.leftLeg localize=true nameAttr="value" labelAttr="labelI18"}}
                    </select>
                    <div>/</div>
                    <select name="data.healthStatus.rightLeg" {{roif rules.settings.damageControlAutomatic}}>
                        {{selectOptions rules.health.apendageStatus selected=actor.health.status.rightLeg localize=true nameAttr="value" labelAttr="labelI18"}}
                    </select>
                </div>
            </div>
        </div>
        <div class="flexrow">
            <label class="resource-label">{{localize "MERP1E.Health.Notes"}}</label>
            <input class="flex3" name="data.healthStatus.notes" value="{{actor.health.status.notes}}" data-dtype="String" type="text"/>
        </div>
    </div>
    {{#if rules.settings.damageControlAutomatic }}
    <div class="flexrow">
        <h2 class="flex3">{{localize 'MERP1E.Health.Damages'}}</h2>

        <div style="display: flex; justify-content: center; align-items: center; text-align: center;" class="flexrow">
            <a class="item-control item-create" title="{{localize 'MERP1E.Item.New'}}" option-renderSheet=true data-type="damage"><i class="fas fa-plus"></i></a>
            <a class="health-control" title="{{localize 'MERP1E.Item.New'}}" data-action="consolidate-damage"><i class="fas fa-calculator"></i></a>
            <a class="health-control" title="{{localize 'MERP1E.Item.New'}}" data-action="next-round"><i class="fas fa-hourglass"></i></a>
            <a class="health-control" title="{{localize 'MERP1E.Item.New'}}" data-action="heal"><i class="fas fa-ambulance"></i></a>
        </div>
    </div>
    <ol>
        <li class="flexrow">
            <div class="flex3">{{localize "MERP1E.Health.Reference"}}</div>
            <div><i title="{{localize 'MERP1E.Damage.AdditionalHits'}}" class="fas fa-heart"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.HitsPerRound'}}" class="fas fa-tint"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.ActivityPenalty'}}" class="fas fa-minus"></i> </div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsActivityPenalty'}}" class="fas fa-user-minus"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsDown'}}" class="far fa-meh"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsOut'}}" class="far fa-dizzy"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsUntilDeath'}}" class="fas fa-skull-crossbones"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsStunned'}}" class="fas fa-ban"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsBlinded'}}" class="fas fa-eye-slash"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.RoundsWeaponStuck'}}" class="fas fa-gavel"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.UnconsciousComa'}}" class="fas fa-dizzy"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.Arm'}}" class="far fa-hand-paper"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.Leg'}}" class="fas fa-shoe-prints"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.Paralyzed'}}" class="fas fa-wheelchair"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.HearingLoss'}}" class="fas fa-deaf"></i></div>
            <div><i title="{{localize 'MERP1E.Damage.eyeLoss'}}" class="fas fa-eye"></i></div>
            <div>
                <a class="item-control item-create" title="{{localize 'MERP1E.Item.New'}}" option-renderSheet=true data-type="damage"><i class="fas fa-plus"></i></a>
            </div>
        </li>
        {{#each actor.damages as | damage | }}
        <li class="flexrow item" data-item-id="{{damage.id}}">
            <div class="flex3">{{damage.data.data.reference}}</div>
            <div>{{damage.data.data.current.additionalHits}}</div>
            <div>{{damage.data.data.current.hitsPerRound}}</div>
            <div>{{damage.data.data.current.activityPenalty}}</div>
            <div>{{damage.data.data.current.roundsActivityPenalty}}</div>
            <div>{{damage.data.data.current.roundsDown}}</div>
            <div>{{damage.data.data.current.roundsOut}}</div>
            <div>{{damage.data.data.current.roundsUntilDeath}}</div>
            <div>{{damage.data.data.current.roundsStunned}}</div>
            <div>{{damage.data.data.current.roundsBlinded}}</div>
            <div>{{damage.data.data.current.roundsWeaponStuck}}</div>
            <div>{{damage.data.data.current.unconsciousComa}}</div>
            <div><i class="{{lookup ../rules.health.sideIcons (leftRightMap damage.data.data.current.leftArm damage.data.data.current.rightArm)}}"></i></div>
            <div><i class="{{lookup ../rules.health.sideIcons (leftRightMap damage.data.data.current.leftLeg damage.data.data.current.rightLeg)}}"></i></div>
            <div><i class="{{lookup ../rules.health.paralyzedIcons damage.data.data.current.paralyzed}}"></i></div>
            <div><i class="{{lookup ../rules.health.sideIcons damage.data.data.current.hearingLoss}}"></i></div>
            <div><i class="{{lookup ../rules.health.sideIcons damage.data.data.current.eyeLoss}}"></i></div>
            <div class="damage-controls" style="text-align:center">
                <a class="item-control item-edit" title="{{localize 'MERP1E.Item.Edit'}}"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="{{localize 'MERP1E.Item.Delete'}}"><i class="fas fa-trash"></i></a>
            </div>
        </li>
        {{/each}}
    </ol>
    {{/if}}
</div>