<form class="{{cssClass}}" autocomplete="off">
    <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}"/>
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{item.name}}" placeholder="{{localize "MERP1E.Spelllist.Name"}}"/></h1>
            <div class="spelllist-restriction resource">
                <div class="spelllist-restriction-radio">
                    <label for="spelllist-restriction-radios" class="resource-label">{{localize "MERP1E.Spelllist.Restriction"}}</label>
                    <div class="spelllist-restriction-radios">
                        {{radioBoxes "data.restriction" rules.spelllist.restrictions checked=data.restriction localize=true}}
                    </div>
                </div>
                <div>
                    <div class="spelllist-restriction-realm" {{#if (isNotEqual data.restriction "realm")}}hidden{{/if}}>
                        <label for="spelllist-restriction-realm">{{localize "MERP1E.Realm.Label"}}</label>
                        <select name="data.realm">
                            {{#each rules.spell.realms as |realm|}}
                            <option value="{{realm}}" {{#if (isEqual ../data.realm realm)}}selected{{/if}}>{{localize (concat "MERP1E.Realm." realm)}}</option>
                            {{/each}}
                    </select>
                    </div>
                    <div class="spelllist-restriction-profession" {{#if (isNotEqual data.restriction "profession")}}hidden{{/if}}>
                        <label for="spelllist-restriction-profession">{{localize "MERP1E.Profession.Label"}}</label>
                        <select name="data.restrictedto">
                            {{#each rules.profession.list as |profession professionKey|}}
                            <option value="{{professionKey}}" {{#if (isEqual ../data.restrictedto professionKey)}}selected{{/if}}>{{localize (concat "MERP1E.Profession." professionKey)}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
            </div>
            {{#if isOwned}}
                <div class="resource">
                    <label for="data.chanceoflearning">{{localize "MERP1E.Spelllist.ChanceOfLearning"}}</label>
                    <input name="data.chanceoflearning" type="number" value="{{data.chanceoflearning}}" {{#if data.learned}}disabled readonly tabindex=-1{{/if}}/>
                    <label for="data.learned">{{localize "MERP1E.Spelllist.Learned"}}</label>
                    <input name="data.learned" type="checkbox" value="{{data.learned}}" {{checked data.learned}}/>
                </div>
            {{/if}}
        </div>
    </header>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
        <h2>Spells:</h2>
        <table class="spelllist-spell-table">
            <thead>
                <tr class="spelllist-spells-header flexrow">
                    <td class="spelllist-spell-level">{{localize "MERP1E.Spelllist.Table.Level"}}</td>
                    <td class="spelllist-spell-name flex2">{{localize "MERP1E.Spelllist.Table.Spell"}}</td>
                    <td class="spelllist-spell-class">{{localize "MERP1E.Spelllist.Table.Class"}}</td>
                    <td class="spelllist-spell-areaofeffect">{{localize "MERP1E.Spelllist.Table.AreaOfEffect"}}</td>
                    <td class="spelllist-spell-duration">{{localize "MERP1E.Spelllist.Table.Duration"}}</td>
                    <td class="spelllist-spell-range">{{localize "MERP1E.Spelllist.Table.Range"}}</td>
                    <td class="spelllist-spell-instantaneous">{{localize "MERP1E.Spelllist.Table.Instantaneous"}}</td>
                    <td></td>
                </tr> 
            </thead>
            <tbody>
                {{#each data.spells as |spell|}}
                <tr class="spelllist-spells-line spelllist-spell-level-{{spell.level}} flexrow">
                    <input name="data.spells.{{spell.level}}.level" type="hidden" value="{{spell.level}}"/>
                    <td class="spelllist-spell-level">{{spell.level}}</td>
                    <input name="data.spells.{{spell.level}}.name" type="hidden" value="{{spell.name}}"/>
                    <td class="spelllist-spell-name flex2">{{spell.name}}</td>
                    <input name="data.spells.{{spell.level}}.class" type="hidden" value="{{spell.class}}"/>
                    <td class="spelllist-spell-class">{{spell.class}}</td>
                    <input name="data.spells.{{spell.level}}.areaofeffect" type="hidden" value="{{spell.areaofeffect}}"/>
                    <td class="spelllist-spell-areaofeffect">{{spell.areaofeffect}}</td>
                    <input name="data.spells.{{spell.level}}.duration" type="hidden" value="{{spell.duration}}"/>
                    <td class="spelllist-spell-duration">{{spell.duration}}</td>
                    <input name="data.spells.{{spell.level}}.range" type="hidden" value="{{spell.range}}"/>
                    <td class="spelllist-spell-range">{{spell.range}}</td>
                    <input name="data.spells.{{spell.level}}.instantaneous" type="hidden" value="{{spell.instantaneous}}"/>
                    <td class="spelllist-spell-instantaneous">{{#if (isEqual spell.instantaneous "true")}}*{{else}}-{{/if}}</td>
                    <td>
                        <a class="spelllist-spell-control" data-action="delete"><i class="fas fa-trash"></i></a>
                    </td>
                </tr> 
                {{/each}}
            </tbody>
        </td>
    </section>
</form>
